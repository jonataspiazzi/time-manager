(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[206],{"/WHw":function(e,t,a){a.d(t,"a",(function(){return v}));var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("JW66"),s=a("Ye/N"),l=a("5FNA"),c=a("VwDf"),d=a("Wer7"),u=a("U4JR"),h=a("vvax"),m=a("ANjH"),p=a("oN2T"),g=a("c50B");function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f(e){var t,a;return a=t=class extends n.Component{constructor(...e){super(...e),b(this,"state",{boardDates:[],createBoardError:null,inputName:this.props.prefilledName||"",nameValidators:[Object(g.o)({message:s.a._("Don't forget to name your board!")}),Object(g.j)({max:r.a.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:Object(h.b)(s.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a user input is too long","Validation error when a user input is too long"),{maxLength:r.a.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],nameValidatorErrors:[],privacy:this.props.isAdAccountOwner?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.PROTECTED,saving:!1}),b(this,"invalidateResource",e=>{const{dispatch:t,viewer:a}=this.props;t(Object(d.f)("BoardsResource",Object(l.a)(a.isAuth?a.username:"",e===r.a.BoardPrivacy.SECRET)))}),b(this,"createBoard",e=>{const{dispatch:t,viewer:a}=this.props;return t(Object(p.g)(e,{isFBC:a.isAuth&&0===a.boardCount}))}),b(this,"handleChangeName",(e,t)=>{const a=Object(g.r)(this.state.nameValidators,e);this.setState({inputName:e,nameValidatorErrors:a,createBoardError:null},()=>{t&&this.handleCreate()})}),b(this,"handleChangePrivacy",()=>{const e=this.state.privacy===r.a.BoardPrivacy.SECRET?r.a.BoardPrivacy.PUBLIC:r.a.BoardPrivacy.SECRET;this.setState({privacy:e})}),b(this,"handleChangeDate",e=>{this.setState({boardDates:e})}),b(this,"handleCreate",()=>{const{boardDates:e,inputName:t,privacy:a}=this.state,{isAdAccountOwner:n,onCreate:i,advertiser_id:o}=this.props;let r,l;e&&e.length>0&&(e.length>1?(r=Object(c.b)(e[0]),l=Object(c.b)(e[1])):l=Object(c.b)(e[0]));const d={event_start_date:r,event_date:l,privacy:a,name:t,...!n&&o?{advertiser_id:o}:{}};this.setState({saving:!0,createBoardError:null}),this.createBoard(d).then(e=>{this.setState({saving:!1}),i(e),d.event_date&&Object(u.b)(8623,{view:415,objectId:e.id})}).catch(e=>{let t=s.a._("Uh oh! Something went wrong.");if("string"==typeof e)t=e;else if(e.message){const{message:a,message_detail:n}=e;t=n?`${a} ${n}`:a}this.setState({saving:!1,createBoardError:t})}),this.invalidateResource(a)})}render(){return i.a.createElement(e,Object.assign({onBoardCreate:this.handleCreate,onChangeBoardDate:this.handleChangeDate,onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy},this.props,this.state))}},b(t,"displayName",`WithBoardCreatePane(${e.displayName||e.name})`),a}function y({advertiser:e,viewer:t}){const a=!e||t.isAuth&&e.owner_user_id===t.id,n=e&&e.id;return{isAdAccountOwner:a,...n?{advertiser_id:n}:{},viewer:t}}function E(e){return{dispatch:e}}function v(e){return Object(m.compose)(Object(o.connect)(y,E),f)(e)}},"5uyJ":function(e,t,a){a.d(t,"a",(function(){return n}));const n={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"6A0I":function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("JW66"),s=a("Sihc"),l=a("Ye/N"),c=a("GBVV"),d=a("n6mq");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.a.Component{constructor(e){super(e),u(this,"onCreateSection",()=>{const{board:e,dispatch:t,completeCreateSectionAction:a,pinImport:n}=this.props;return this.setState({isSaving:!0}),t(Object(s.a)({boardId:e.id,name:this.state.inputName.trim(),pinImport:n})).then(e=>{this.setState({isSaving:!1}),a(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),u(this,"handleKeyDown",({event:e,value:t})=>{const{createError:a,inputName:n}=this.state;[r.a.KeyCode.ENTER,r.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!a&&n.trim()&&this.onCreateSection()}),u(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),u(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){const{createError:a,inputRef:n}=this.state;!n||t.inputRef&&!a||n.focus()}render(){const{onClearModal:e,showTitle:t,positionRelative:a}=this.props,{createError:n,inputName:o,isSaving:r}=this.state,s=!!o.trim()&&!n;return i.a.createElement(d.e,{display:"flex",direction:"column",color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:a?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},t&&i.a.createElement(d.e,{marginTop:3,paddingX:6,paddingY:3},i.a.createElement(d.s,{size:"sm"},l.a._("Add section","Title in the add section modal","Title in the add section modal"))),i.a.createElement(d.e,{padding:3},i.a.createElement(d.e,{marginBottom:2},i.a.createElement(d.w,{htmlFor:"sectionEditName"},i.a.createElement(d.V,{size:"md",color:n?"red":"gray"},l.a._("Name","Board section name","Board section name")))),i.a.createElement(d.e,null,i.a.createElement(d.e,{ref:this.handleInputRef},i.a.createElement(d.X,{errorMessage:n||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:l.a._('Like "Lighting"',"Placeholder for board section name","Placeholder for board section name"),size:"lg",type:"text",value:o})))),i.a.createElement(d.o,null),i.a.createElement(d.e,{display:"flex",flex:"grow"}),i.a.createElement(d.o,null),i.a.createElement(d.e,{padding:6},i.a.createElement(d.e,{display:"flex",justifyContent:"between"},i.a.createElement(d.f,{onClick:e,text:l.a._("Cancel","cancel section add","cancel section add"),inline:!0}),i.a.createElement(c.b,{disabled:!s||r,onClick:this.onCreateSection,submitting:r,text:l.a._("Add","add a new section","add a new section")}))))}}t.a=Object(o.connect)()(h)},"6G9P":function(e,t,a){a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a("q1tI"),i=a.n(n),o=(a("JW66"),a("yaUg")),r=a("Ye/N"),s=a("n6mq");const l=(e,t)=>{if(!t)return e;const a=new RegExp(/http(s?):/);if(!a.test(e)){const n=a.exec(t);if(n&&n.length){e=n[0]+e}}return e},c=(e,t)=>t?Object(o.a)(r.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board","Toast for successfully saving to a section within a board"),{sectionName:t.title,boardName:e}):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.V,{color:"white"},r.a._("Saved to")),i.a.createElement(s.V,{color:"white",weight:"bold"},e))},"82UD":function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("ajUs"),s=a("ou9u"),l=a("gYog"),c=a("hFNL"),d=a("qD10"),u=a("yKES"),h=a("5uyJ"),m=a("n6mq");const p={overlay:{__style:{backgroundColor:"#000"}}};function g(e){const{pin:{id:t,images:a,title:n,videos:o,video_status_message:r}}=e,s=r||{},l=a&&a["236x"],c=o&&o.video_list[h.a.V_HLSV4],{duration:g}=c||{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(m.i,null,i.a.createElement(d.a,{to:"/pin/"+t},i.a.createElement(m.e,{overflow:"hidden",position:"relative",rounding:2},l&&i.a.createElement(m.v,{alt:n||"",color:"lightGray",naturalHeight:l.height,naturalWidth:l.width,src:l.url}),!!g&&i.a.createElement(m.e,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},i.a.createElement(u.a,{duration:g})),i.a.createElement(m.e,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:p.overlay}),i.a.createElement(m.e,{position:"absolute",top:!0,left:!0,padding:5,width:"100%"},i.a.createElement(m.s,{color:"white",overflow:"normal",size:"sm"},s.title),i.a.createElement(m.e,{marginTop:4},i.a.createElement(m.V,{color:"white",size:"md",overflow:"normal"},s.subtitle)))),i.a.createElement(m.e,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1},i.a.createElement(m.e,{flex:"grow"},n&&i.a.createElement(m.e,{paddingY:1},i.a.createElement(m.V,{inline:!0,size:"md",weight:"bold"},n)))))))}var b=a("Y8Sn"),f=a("vpxy"),y=a("0nTG");t.a=Object(o.connect)((function({pins:e},{pin:t,pinId:a}){return{reduxPin:e[a]||t}}),()=>({}))((function({reduxPin:e,trackingParameters:t,...a}){const d=Object(o.useSelector)(({location:e})=>e),u=Object(r.a)(e,d),h=Object(s.a)(e),m=!!(h&&h.url&&h.height&&h.width)||void 0,p=h&&e.videos?e.videos.id:void 0,[E,v]=Object(n.useState)(!1),S=Object(n.useCallback)(()=>v(!0),[]),w=Object(n.useCallback)(()=>v(!1),[]),{componentType:_,contextLogData:C,impressionAuxFields:x,slotIndex:T,viewData:O,viewParameter:B,viewType:j}=t;return i.a.createElement(l.a,{componentType:_,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(c.b)(window)}:{},...C,...Object(y.f)(e,C)},impressionAuxFields:{...x||{},isNativeVideoAndWatchable:m,videoIdStr:p,clientTrackingParams:u||(e.tracking_params||"")+"-0",imageURL:e.images&&e.images["236x"].url,richTypes:Object(y.e)(e)},impressionType:"Pin",isPaused:!E,loggingId:e.id,slotIndex:T,viewData:O,viewParameter:B,viewType:j},Object(b.h)(e)?i.a.createElement(g,{pin:e}):i.a.createElement(f.a,Object.assign({},a,{debugImpressionState:E?"started":"paused",onError:w,onLoad:S,pin:e,trackingParameters:{componentType:_,contextLogData:C,slotIndex:T,viewParameter:B,viewType:j}})))}))},B6Tf:function(e,t,a){a.d(t,"a",(function(){return le})),a.d(t,"c",(function(){return ce})),a.d(t,"b",(function(){return ue}));var n=a("q1tI"),i=a.n(n),o=a("b/K5"),r=a("/MKj"),s=a("JW66"),l=a("QoKk"),c=a("Ye/N"),d=a("GBVV"),u=a("/WHw"),h=a("fZbY"),m=a("jZhD"),p=a("FDmi"),g=a("yaUg"),b=a("n6mq");function f(e){const{body:t,img:a,onClick:n,selected:o,title:r,username:s,valid:l}=e,d=s||t;return i.a.createElement(b.e,{marginBottom:4},i.a.createElement(b.U,{onTap:n},i.a.createElement(b.e,{alignItems:"center",direction:"row",display:"flex",width:"100%"},a,i.a.createElement(b.e,{flex:"grow",marginEnd:2,marginStart:3},i.a.createElement(b.e,{marginBottom:1},i.a.createElement(b.V,{truncate:!0,weight:"bold"},r)),i.a.createElement(b.V,{size:"sm",truncate:!0},d)),i.a.createElement(b.e,{marginStart:2},(u=o,h=l,s?u?i.a.createElement(b.t,{accessibilityLabel:c.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites","Alt tags on a check box on the board create flow for board invites"),color:"red",icon:"check-circle",size:32}):i.a.createElement(b.e,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):i.a.createElement(b.f,{color:"gray",disabled:!!u||Boolean(!h),inline:!0,size:"sm",text:u?c.a._("Sent","Sent a board collaborator invite","Sent a board collaborator invite"):c.a._("Invite","Add board collaborator invite","Add board collaborator invite")}))))));var u,h}var y=a("ZE2w"),E=a("w70y");function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t,a){const{id:n}=e;return t===a.findIndex(e=>e.id===n)}class w extends n.Component{constructor(...e){super(...e),v(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),v(this,"isIdSelected",{}),v(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),v(this,"handleCollaboratorClick",e=>{const{id:t,type:a}=e;this.isIdSelected[t]=!this.isIdSelected[t];const{selectedCollaborators:n}=this.state,i=n.concat([e]),o="email"===a?y.c:y.d;this.props.onSelectedCollaboratorsChange({id:t,resource:o}),this.setState({selectedCollaborators:i})}),v(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(e=>{const{id:t,type:a}=e;this.isIdSelected[t]=!this.isIdSelected[t];const n="email"===a?y.c:y.d;return this.props.onSelectedCollaboratorsChange({id:t,resource:n}),null})}render(){const{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,a=t||[],n=(""===e?this.state.selectedCollaborators.concat(a).filter(S):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:Object(h.a)(e)}).concat(a).filter(S)).map(e=>function(e,t,a){if("user_share_suggestion"===e.type||"user"===e.type){const n=i.a.createElement(p.a,{name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return i.a.createElement(f,{img:n,onClick:()=>a(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){const{id:n,valid:o}=e,r=i.a.createElement(b.e,{alignItems:"center",color:"lightGray",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40},i.a.createElement(b.t,{accessibilityLabel:c.a._("Email icon","Email icon on board create modal","Email icon on board create modal"),color:"darkGray",icon:"envelope",size:20})),s=Object(g.a)(c.a._("Email {{ email }}"),{email:n});let l,d;return t?(l=c.a._("Done!","Text that lets the user know we sent the board invite email","Text that lets the user know we sent the board invite email"),d=()=>{}):(l=o?c.a._("Click to send!","Text that lets the user know they can successfully send a board invite email","Text that lets the user know they can successfully send a board invite email"):c.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet","Text that lets a user know the email they are typing is not valid yet"),d=()=>o?a(e):void 0),i.a.createElement(f,{body:l,img:r,onClick:d,selected:t,title:s,valid:o})}}(e,this.isIdSelected[e.id],this.handleCollaboratorClick)).map((e,t)=>i.a.createElement("li",{key:t},e));return i.a.createElement(b.e,{direction:"column",display:"flex",height:"100%"},i.a.createElement(b.e,{paddingX:3,paddingY:2},i.a.createElement(b.V,{size:"sm"},c.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create","Optional field to add collaborators to a board on board create"))),i.a.createElement(b.e,{marginBottom:4,marginTop:2,paddingX:3,width:"100%"},i.a.createElement(b.e,{flex:"grow"},i.a.createElement(m.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e},i.a.createElement(b.K,{accessibilityLabel:c.a._("Search for collaborators by name or email"),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:c.a._("Search by name or email"),size:"lg",value:e})))),i.a.createElement(b.e,{overflow:"scrollY",paddingX:3},i.a.createElement("ul",null,n)))}}var _=Object(E.b)({name:"ShareSuggestionsResource",key:"shareSuggestionsResource",allowStale:!1})(w);var C=Object(u.a)((function({createBoardError:e,inputName:t,nameValidatorErrors:a,onBoardCreate:n,onCancel:o,onChangeBoardDate:r,onChangeBoardName:u,onChangeBoardPrivacy:h,onInvite:m,onToggleFlyout:p,privacy:g,preselectedCollaborators:f,saving:y,showTitle:E,isAdAccountOwner:v}){const S=0===a.length,w=g===s.a.BoardPrivacy.SECRET;return i.a.createElement(b.e,{color:"white",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"},i.a.createElement("form",{onSubmit:e=>{e.preventDefault(),n()},style:{height:"100%"}},i.a.createElement(b.e,{direction:"column",display:"flex",height:"100%"},E&&i.a.createElement(b.e,{display:"flex",marginTop:3,paddingX:6,paddingY:3},i.a.createElement(b.s,{size:"sm"},c.a._("Create board"))),i.a.createElement(b.e,{padding:3},i.a.createElement(b.e,{marginBottom:2},i.a.createElement(b.w,{htmlFor:"boardEditName"},i.a.createElement(b.V,{size:"sm"},c.a._("Name")))),i.a.createElement(b.e,null,i.a.createElement(b.X,{errorMessage:a.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>u(e),placeholder:c.a._('Like "Places to Go" or "Recipes to Make"'),size:"lg",value:t}))),i.a.createElement(b.e,{padding:3},i.a.createElement(b.e,{marginBottom:2},i.a.createElement(b.w,{htmlFor:"boardEditDate"},i.a.createElement(b.V,{size:"sm"},c.a._("Add dates (optionalâ€”this can help you plan!)","pin-to-board.CreateBoardPane.CreateBoardPane","Label for date picker field on board create")))),i.a.createElement(b.e,null,i.a.createElement(l.a,{onChange:r,onToggleFlyout:p}))),v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.e,{padding:3},i.a.createElement(b.e,{marginBottom:2},i.a.createElement(b.w,{htmlFor:"secret"},i.a.createElement(b.V,{size:"sm"},c.a._("Secret","secret board","secret board")))),i.a.createElement(b.e,null,i.a.createElement(b.R,{id:"secret",onChange:h,switched:w}))),i.a.createElement(b.e,{display:"flex",flex:"grow",overflow:"hidden"},i.a.createElement(b.e,{width:"100%"},i.a.createElement(_,{onSelectedCollaboratorsChange:m,preselectedCollaborators:f})))),!v&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.e,{padding:3},i.a.createElement(b.e,{marginBottom:2},i.a.createElement(b.w,{htmlFor:"protected"},i.a.createElement(b.V,{size:"sm"},c.a._("Protected board (not listed on user's profile)","protected board","protected board")))),i.a.createElement(b.e,null,i.a.createElement(b.R,{disabled:!0,id:"protected",onChange:()=>{},switched:!0})))),i.a.createElement(b.e,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px",marginLeft:"-288px"}},display:"flex",justifyContent:"between",paddingX:4,paddingY:2,position:"absolute",width:720},i.a.createElement(b.f,{inline:!0,onClick:o,text:c.a._("Cancel","cancel board create","cancel board create")}),i.a.createElement(b.e,{display:"flex",justifyContent:"end"},!!e&&i.a.createElement(b.e,{paddingX:2},i.a.createElement(b.V,{align:"center",color:"red",size:"md",weight:"bold"},e)),i.a.createElement(d.b,{disabled:!t.trim()||!S||!!e||y,submitting:y,text:c.a._("Create","create a new board","create a new board")}))))))})),x=a("6A0I"),T=a("0BOE"),O=a("qyR9");class B extends n.Component{constructor(...e){var t,a,n;super(...e),n=e=>{const{board:t,sectionsResource:{data:a}}=this.props;return e.length>=O.a?[{items:Object(T.a)([t],e),customProps:{inSectionSelection:!0}},{items:Object(T.a)(a,e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0}},{items:a}]},(a="getSections")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{sectionsResource:{error:e,isLoaded:t},boardSavedTo:a,isSelectMode:n,onSectionCreate:o,onSectionSelected:r,pinId:s}=this.props;return i.a.createElement(O.b,{isSelectMode:n,boardSavedTo:a,createButtonLabel:c.a._("Add section","Button for creating a board section","Button for creating a board section"),hasLoadError:!!e,isLoaded:t,getSections:this.getSections,onCreate:o,onSelected:r,pinId:s})}}var j=Object(E.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})})(B),k=a("Wer7"),I=a("U4JR"),P=a("ANjH");function R(e,t,a){return{...e?{pin_id:e}:{},...t?{username:t}:{},...a?{advertiser_id:a,filter:"protected"}:{},field_set_key:"board_picker",limit:undefined,shortlist_suggestions:2}}class D extends n.Component{constructor(...e){var t,a,n;super(...e),n=e=>{const{boardResource:{data:t}}=this.props;if(!t)return[];const{all_boards:a,boards_shortlist:n}=t,i=(e=>{const t=[],a=[];return e.forEach(e=>{e.name.match(/^\d/)?a.push(e):t.push(e)}),[...t,...a]})(a);return i.length<=3?[{items:i}]:e.length>=O.a?[{items:Object(T.a)(i,e)}]:[n.length?{items:n,title:c.a._("Top choices")}:{items:[]},{items:i,title:c.a._("All boards","title for board picker all boards section","title for board picker all boards section")}]},(a="getSections")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{boardResource:{data:e,error:t,isLoaded:a},boardSavedTo:n,isSelectMode:o,onBoardCreate:r,onBoardSelected:s,pinId:l}=this.props,c=a&&!!e&&e.all_boards.length<=3;return i.a.createElement(O.b,{isSelectMode:o,boardSavedTo:n,hasLoadError:!!t,hasLowBoardCount:c,isLoaded:a,getSections:this.getSections,onCreate:r,onSelected:s,pinId:l})}}var N=Object(P.compose)(Object(r.connect)((function(e){const{advertiser:t,viewer:a}=e;return a.isAuth&&t&&t.owner_user_id!==a.id?{advertiser_id:t.id,username:t.owner_user_id}:{}})),Object(E.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>R(e.pinId,e.username,e.advertiser_id)}))(D);function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class F extends i.a.Component{constructor(...e){super(...e),A(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),A(this,"close",()=>{const{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:a}=this.props;t?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):a()}),A(this,"sendInvites",e=>{const{inviteQueue:t}=this.state;Object.keys(t).forEach(a=>{t[a].resource(e.id,[a])})}),A(this,"handleInvite",e=>{const{inviteQueue:t}=this.state;if(t[e.id]){const a={...t};delete a[e.id],this.setState({inviteQueue:a})}else{const a=Object.assign({},t,{[e.id]:e});this.setState({inviteQueue:a})}}),A(this,"handleBoardCreate",e=>{const{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),A(this,"handleBoardSave",(e,t)=>{const{selectedSectionBoard:a}=this.state,{onBoardSave:n,invalidatePinBetterSaveResource:i,invalidateResource:o}=this.props;if(o(),i(),a&&"board_section"===e.type){return n(a,e,t)}const r=e,{section_count:s=0}=r;!a&&s>0?this.setState({selectedSectionBoard:r},this.manageModalTitle):(this.sendInvites(e),n(r,void 0,t))}),A(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle);const a=e?13105:13025,n=e?10306:249;Object(I.b)(101,{component:a,element:n})}),A(this,"manageModalTitle",()=>{const{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:a}=this.state;e&&e(a&&t?c.a._("Add section","Repin title for making a board section","Repin title for making a board section"):a&&!t?c.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t&&!a?c.a._("Choose section","Repin title for choosing a board section","Repin title for choosing a board section"):c.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board"))})}render(){const{boardSavedTo:e,isRepin:t,isSelectMode:a,onToggleFlyout:n,pinId:o,preselectedCollaborators:r,setModalTitle:s,suggestedBoardTitle:l}=this.props,{newName:c,selectedSectionBoard:d,showCreate:u}=this.state,h=!!d,m=!s;return i.a.createElement(b.e,{display:"flex",position:"relative",width:"100%"},!u&&i.a.createElement(b.e,{direction:"column",display:"flex",marginTop:4,width:"100%"},d?i.a.createElement(j,{board:d,boardSavedTo:e,isSelectMode:a,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):i.a.createElement(N,{boardSavedTo:e,isSelectMode:a,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinId:o})),u&&!d&&i.a.createElement(C,{onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,onToggleFlyout:n,pinId:o,prefilledName:c||l,preselectedCollaborators:r,showTitle:m}),u&&d&&i.a.createElement(x.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:c,isRepin:t,onClearModal:this.close,showTitle:m}))}}var L=Object(r.connect)(null,(function(e,t){return{invalidateResource:()=>{e(Object(k.f)("BoardPickerBoardsResource",R(t.pinId)))},invalidatePinBetterSaveResource:()=>{e(Object(k.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))(F),M=a("TiQD"),V=a("v+PR"),H=a("Ev07"),z=a("G35+"),W=a("mBfy");var U=Object(P.compose)(Object(r.connect)(({viewer:e})=>({viewer:e}),()=>({})),Object(E.b)({name:"UserResource",key:"userSocialResource",options:e=>({user_id:e.viewer&&e.viewer.isAuth?e.viewer.id:"",field_set_key:"social_connect"})}))((function({onSocialConnect:e,userSocialResource:{data:t,isLoaded:a}}){const[o,r]=Object(n.useState)(!!(a&&t&&t.facebook_publish_stream_enabled)),[s,l]=Object(n.useState)(!!(a&&t&&t.twitter_publish_enabled));if(Object(n.useEffect)(()=>{a&&t&&(r(!!t.facebook_publish_stream_enabled),l(!!t.twitter_publish_enabled))},[t,a]),!t)return null;const{connected_to_facebook:d,twitter_url:u}=t,h=t=>{r(t),W.default.set("facebook_publish_stream_enabled",t),e(z.a.FACEBOOK,t)};return!(!d&&!u)&&i.a.createElement(b.e,{display:"flex",padding:2},d&&i.a.createElement(b.e,{display:"flex",alignItems:"center",marginStart:2},i.a.createElement(b.j,{checked:o,id:"share_facebook",onChange:()=>{o?h(!1):H.a.maybeRequestFbTimelinePermission({success:()=>h(!0),error:()=>h(!1)})},size:"sm"}),i.a.createElement(b.w,{htmlFor:"share_facebook"},i.a.createElement(b.e,{marginStart:2},i.a.createElement(b.V,null,c.a._("Post to Facebook"))))),u&&i.a.createElement(b.e,{display:"flex",alignItems:"center",marginStart:5},i.a.createElement(b.j,{checked:s,id:"share_twitter",onChange:()=>{const t=!s;l(t),e(z.a.TWITTER,t)},size:"sm"}),i.a.createElement(b.w,{htmlFor:"share_twitter"},i.a.createElement(b.e,{marginStart:2},i.a.createElement(b.V,null,c.a._("Post to Twitter"))))))})),q=a("Sihc");function Y(){return i.a.createElement(b.e,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center"},i.a.createElement(b.O,{accessibilityLabel:c.a._("Pins being saved to new sections","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","accessibility label on spinner"),show:!0}),i.a.createElement(b.e,{paddingY:2},i.a.createElement(b.s,null,c.a._("Hold, please...","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Heading on modal while saving pins"))),i.a.createElement(b.V,null,c.a._("We're grouping these into sections. This will help organize all your ideas!","save.pin-to-board.PinToBoard.SectionSuggestions.SavingView","Text explaining new pins are being saved")))}var K=a("82UD");function G({index:e,pin:t,sectionName:a}){const o=t.id,r=Object(n.useContext)(ae),[s,l]=Object(n.useState)(!1),c=Object(n.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),r({type:s?"unselect":"select",payload:{sectionName:a,pinId:o}}),l(!s)},[o,s]);return i.a.createElement(b.U,{onTap:c,rounding:4},i.a.createElement(K.a,{attributionOption:"hide",blockClickEvents:!0,pin:t,pinId:t.id,pinImageCrop:"none",saveButtonOptions:{type:"none"},selectionState:s?"selected-image-only":"deselected-image-only",surface:"SectionSuggestedPins",trackingParameters:{slotIndex:e}}))}var X=Object(n.memo)((function({sectionSuggestion:e,showSpinner:t}){const a=Object(n.useRef)(),o=Object(E.a)({name:"BatchP2PResource",options:{clientType:"84",page_size:10,pinIds:e.pins.map(e=>e.id)},allowStale:!1});return i.a.createElement(n.Fragment,null,i.a.createElement(b.e,{display:"flex",justifyContent:"center",width:"100%"},i.a.createElement(b.O,{accessibilityLabel:c.a._("Loading pins","save.pin-to-board.PinToBoard.SectionSuggestions.SectionPinsSelection","Accessibility label on a loading spinner"),show:t&&o.isFetching})),o.data&&i.a.createElement(b.e,{paddingY:4,paddingX:8},i.a.createElement(b.s,{align:"left",size:"sm"},e.name)),i.a.createElement(b.e,{ref:a},o.data&&a&&a.current&&i.a.createElement(b.B,{columnWidth:152,comp:({data:t,itemIdx:a})=>i.a.createElement(G,{index:a,pin:t,sectionName:e.name}),gutterWidth:16,items:o.data||[],loadItems:()=>{},scrollContainer:()=>a.current})))}),(e,t)=>e.sectionSuggestion.id===t.sectionSuggestion.id);function Q({canSubmit:e,handleClose:t,handleSubmit:a,sectionSuggestions:o}){return i.a.createElement(n.Fragment,null,i.a.createElement(b.e,{width:"100%"},i.a.createElement(b.e,{minHeight:"100%",marginBottom:12,width:"100%"},o.map((e,t)=>i.a.createElement(b.e,{marginBottom:4,key:e.name},i.a.createElement(X,{sectionSuggestion:e,showSpinner:0===t})))),i.a.createElement(b.e,{bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",position:"sticky"}},display:"flex",justifyContent:"end",padding:4,width:720},i.a.createElement(b.f,{color:e?"red":"gray",inline:!0,size:"lg",text:e?c.a._("Next","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"):c.a._("Skip","save.pin-to-board.PinToBoard.SectionPinsWrapper","Button to submit form selections"),onClick:()=>{e?a():t()}}))))}function J({handleClose:e,handleSubmit:t,suggestions:a}){const[o,r]=Object(n.useState)({}),s=!!Object.keys(o).length;return i.a.createElement(b.e,null,i.a.createElement(b.e,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{height:"calc(100% - 88px)"}}},i.a.createElement(b.e,{display:"flex",wrap:!0,height:360,paddingX:6},a.map(e=>i.a.createElement(b.e,{paddingX:1,height:160,key:e.name},i.a.createElement(b.U,{onTap:()=>{const t={...o};t[e.name]?delete t[e.name]:t[e.name]=e,r(t)},rounding:6},i.a.createElement(b.e,{rounding:7,dangerouslySetInlineStyle:{__style:{border:o[e.name]?"2px solid #111":"2px solid white",padding:"2px"}}},i.a.createElement(b.e,{height:160,width:152,position:"relative",rounding:6},i.a.createElement(b.A,{rounding:6,height:160,width:152},i.a.createElement(b.v,{alt:e.name,fit:"cover",naturalHeight:e.images["236x"].height,naturalWidth:e.images["236x"].width,src:e.images["236x"].url})),i.a.createElement(b.e,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.3)"}},display:"flex",height:160,justifyContent:"center",left:!0,paddingX:5,position:"absolute",rounding:6,top:!0,width:152},i.a.createElement(b.s,{align:"center",color:"white",size:"sm"},e.name))))))))),i.a.createElement(b.e,{display:"flex",width:"100%",justifyContent:"end",padding:5},i.a.createElement(b.f,{color:s?"red":"gray",inline:!0,size:"lg",text:s?c.a._("Next","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"):c.a._("Skip","save.pin-to-board.SectionSuggestionPicker","Button to submit form selections"),onClick:()=>{s?t(Object.values(o)):e()}})))}var $=a("CvCA"),Z=a("6G9P"),ee=a("EC67"),te=a("nGHF");const ae=Object(n.createContext)();function ne(e,t){const{sectionName:a,pinId:n}=t.payload,i=[...e[a]||[]];switch(t.type){case"select":return{...e,[a]:[...i,n]};case"unselect":const t=i.indexOf(n);if(i.splice(t,1),!i.length){const t={...e};return delete t[a],t}return{...e,[a]:i};default:throw new Error("Unsupported action received by PinSelectionReducer")}}function ie({board:e,handleClose:t,setModalTitle:a,suggestions:o}){const[s,l]=Object(n.useState)("sections"),[d,u]=Object(n.useState)([]),[h,m]=Object(n.useReducer)(ne,{}),{showOneToast:p}=Object(te.b)(),g=Object(r.useDispatch)(),b=Object(ee.g)(),f=Object(n.useRef)(!1);Object(n.useEffect)(()=>()=>{f.current&&clearTimeout(f.current)});const y=()=>{Object(I.b)(101,{component:20,view:52})},E=()=>{t(),p(({onHide:t})=>i.a.createElement($.a,{duration:le,onHide:t,text:Object(Z.a)(e.name),href:e.url,imageUrl:e.image_cover_url,onClick:y}))};return{sections:i.a.createElement(J,{handleClose:E,handleSubmit:e=>{u(e),l("pins"),a&&a(c.a._("Great! Pick some ideas to start off your board.","save.pin-to-board.PinToBoard.SectionSuggestions.SectionSuggestionContainer","Modal title for choosing ideas for a new board"))},suggestions:o}),pins:i.a.createElement(ae.Provider,{value:m},i.a.createElement(Q,{canSubmit:!!Object.keys(h).length,handleClose:E,handleSubmit:()=>{let t=0;l("saving"),a&&a(null);const n=d.reduce((e,t)=>(e[t.name]=null,e),{});Object.entries({...n,...h}).forEach(([a,n])=>{g(Object(q.a)({boardId:e.id,initialPinIds:n,name:a})).then(()=>{t+=1,t===d.length&&(f.current=setTimeout(()=>{b.push(e.url)},1500))})})},sectionSuggestions:d})),saving:i.a.createElement(Y,null)}[s]}var oe=a("Yo6N"),re=a("pLLR");function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const le=4e3,ce={LOADING:"loading",SUCCESS:"success"};class de extends n.PureComponent{constructor(...e){super(...e),se(this,"state",{isFlyoutOpen:!1,isSavingPin:!1,newBoard:null}),se(this,"pinImageRef",Object(n.createRef)()),se(this,"unmounted",!1),se(this,"handleSavePinToBoard",(e,t,a)=>{const{handleSaveToBoard:n,sectionSuggestions:i,setModalTitle:o}=this.props;n(e,t,a),a&&(this.setState({isSavingPin:!0,newBoard:e}),i&&i.length>0&&o&&o(c.a._("Here are some popular topics related to your board. Choose any you like.","save.pin-to-board.PinToBoard.SectionPickerModalTitle","Modal title for selection recommended sections for a new board")))}),se(this,"handleToggleFlyout",()=>this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})),se(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),se(this,"close",()=>{const{isFlyoutOpen:e}=this.state,{handleAbort:t}=this.props;e||t()}),se(this,"dismissModal",e=>{const{dismissModal:t}=this.props;t&&t()})}componentWillUnmount(){this.unmounted=!0}render(){const{boardSavedTo:e,boardWithSection:t,color:a,displaySuccessAnimation:r,handleNewBoardAnimationCompletion:s,handleSocialConnectSet:l,isInModal:d,newPin:u,pin:h,preselectedCollaborators:m,onBoardCreated:p,sectionSuggestions:g,sensitiveContentNotice:f,setModalTitle:y,showCreate:E,shouldRenderContent:v,suggestedBoardTitle:S,updateDescription:w}=this.props;if(!h||!h&&!h.resourceLoaded||!v)return null;const{isSavingPin:_,newBoard:C}=this.state;let x=null;u&&u.board&&(x=u.board.name);const T=f&&f.title||this.props.modalTitle,O=f?i.a.createElement(oe.a,{inModal:!0,notices:[f]}):i.a.createElement(b.e,{display:"flex",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%"},_&&C&&g&&g.length>0?i.a.createElement(ie,{board:C,handleClose:this.close,setModalTitle:y,suggestions:g}):i.a.createElement(n.Fragment,null,i.a.createElement(b.e,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%"},i.a.createElement(b.e,{direction:"column",display:"flex",justifyContent:"between",width:"40%"},i.a.createElement(b.e,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3},i.a.createElement(V.a,{color:a,pin:h,pinImageRef:this.pinImageRef,updateDescription:w})),i.a.createElement(U,{onSocialConnect:l})),i.a.createElement(b.e,{display:"flex",width:"60%"},i.a.createElement(L,{boardSavedTo:e,boardWithSection:t,isRepin:!0,onBoardCreated:p,onBoardSave:this.handleSavePinToBoard,onClose:this.close,onToggleFlyout:this.handleToggleFlyout,pinId:h.id,preselectedCollaborators:m,setModalTitle:d?y:void 0,showCreate:E,suggestedBoardTitle:S}))),r&&i.a.createElement(o.a,{onDismiss:()=>{s(),this.dismissModal()},pin:h,pinImageRef:this.pinImageRef,selectedBoardName:x})));return d?i.a.createElement(M.b,{accessibilityModalLabel:T||c.a._("Repin modal","save.pin-to-board.PinToBoard.PinToBoard","Accessibility label on modal"),heading:T,onDismiss:this.close,size:"md"},O):O}}se(de,"defaultProps",{pwtAuxData:{}});const ue=Object(re.e)(de)},Ev07:function(e,t,a){var n=a("1inl"),i=a("K316"),o=a("TvzZ"),r=a("Ye/N");const s="publish_actions",l={checkFbTimelinePermission:function(e){Object(o.default)((function(t){t.api("/me/permissions",t=>{const a=t.data;let n=!1;if(a){n=!!a.find(e=>e.permission===s&&"granted"===e.status)}n?e.success&&e.success():e.error&&e.error()})}),i.a)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;const a=e.getAuthResponse();return!a||t===a.userID},maybeRequestFbTimelinePermission:function(e,t){Object(o.default)(a=>{if(!l.fbConnectedAccountMatchesLoggedInAccount(a,t))return n.a.showError(r.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());l.checkFbTimelinePermission({success(){e.success&&e.success(),e.complete&&e.complete()},error(){l.fbLogin(e)}})},i.a)},fbLogin:function(e){Object(o.default)(t=>{t.login(t=>{t.authResponse?l.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:s})},i.a)}};t.a=l},P6kd:function(e,t,a){var n=a("q1tI"),i=a.n(n),o=a("Ye/N"),r=a("oRao"),s=a("eOdZ"),l=a("vxan"),c=a("vvax"),d=a("n6mq");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class h extends i.a.Component{constructor(...e){super(...e),u(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),u(this,"onDismiss",()=>{}),u(this,"mounted",!1),u(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),u(this,"handleKeyDown",e=>{38===e.keyCode?this.handlePrevHashtag(e):40===e.keyCode?this.handleNextHashtag(e):27===e.keyCode?this.handleClose(e):13===e.keyCode&&this.handleSubmit(e)}),u(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),u(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),u(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),u(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),u(this,"callResource",e=>{const{makeCancelablePromise:t}=this.props;t(s.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(e=>{if(!this.mounted)return;const t=e.resource_response.data;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){const{recommendations:e,resourceLoaded:t,selectedIndex:a}=this.state,{anchor:n,idealDirection:s}=this.props,l=e.filter(e=>e.query),u=s||"down",h="flyout_"+l.length;return t&&l.length>0?i.a.createElement("div",{className:"HashtagFlyout"},i.a.createElement(d.q,{key:h,anchor:n,idealDirection:u,onDismiss:this.onDismiss,size:"sm"},i.a.createElement("div",{className:"HashtagRecommendations"},l.length>0?l.map((e,t)=>i.a.createElement("div",{className:"HashtagItem",key:e.query},i.a.createElement(d.U,{fullWidth:!1,onTap:()=>this.addHashtag(e.query)},i.a.createElement(d.e,{display:"flex",justifyContent:"between",alignItems:"center",color:t===a?"lightGray":"transparent",padding:1},i.a.createElement(d.e,{flex:"grow"},i.a.createElement(d.V,{inline:!0,size:"md",weight:"bold"},e.query)),i.a.createElement(d.e,{flex:"none"},i.a.createElement(d.V,{inline:!0,size:"sm"},Object(c.b)(o.a.ngettext("{{ count }} pin","{{ count }} pins",Number(e.pin_count),"label for n pins in hashtag flyout","label for n pins in hashtag flyout"),{count:i.a.createElement(r.a,{value:Number(e.pin_count),key:"pinCount"})}))))))):null))):null}}t.a=Object(l.a)(h)},QoKk:function(e,t,a){a.d(t,"a",(function(){return p}));var n=a("q1tI"),i=a.n(n),o=(a("w/op"),a("Ye/N")),r=a("rYoy"),s=a("n6mq");const l=["es-AR","es-BZ","es-BO","pt-BR","en-CA","es-CL","zh-CN","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","zh-HK","he","en-JM","ja","en-KE","zh-MO","es-MX","es-NI","es-PA","es-PE","en-PH","es-PR","en-ZA","ko","zh-TW","en-US","es-VE"];var c=a("pLLR");const d=Object(n.lazy)(()=>a.e("Calendar").then(a.t.bind(null,"sQeT",7))),u=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear();function h({onSelectedDate:e,selectedDates:t}){const a=Object(c.d)();return i.a.createElement(r.a,null,i.a.createElement(d,{calendarType:l.includes(a.locale)?"US":"ISO 8601",locale:a.locale||"",className:"DatePicker",enableHistoryView:!1,onClickDay:a=>{1===t.length&&t[0]<a?e([t[0],a]):e([a])},minDetail:"month",nextLabel:i.a.createElement(s.t,{accessibilityLabel:o.a._("Next month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to next calendar month"),icon:"arrow-forward"}),next2Label:null,prevLabel:i.a.createElement(s.t,{icon:"arrow-back",accessibilityLabel:o.a._("Previous month","BoardForm.BoardFormExperimentalDatePicker","accessibility label on arrow to go to previous calendar month")}),prev2Label:null,tileClassName:({date:e})=>{const a=[],[n,i]=t;return n&&u(e,n)?(a.push("start"),i&&a.push("rangeStart")):i&&u(e,i)?a.push("rangeEnd"):2===t.length&&e>=n&&e<=i&&a.push("inRange"),a},tileDisabled:({date:e})=>e<=new Date,value:t.length?t:new Date,view:"month"}))}var m=a("TiQD");function p({dates:e,onChange:t,onToggleFlyout:a=(()=>{})}){const r=Object(n.useRef)(null),[l,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)(e||[]),g=Object(c.d)(),[b,f]=u||[];let y=b&&b.toLocaleDateString(g.locale)||"";if(f){y+=" - "+u[1].toLocaleDateString(g.locale)}const E=()=>{p([]),t([])},v=()=>{a(),d(!l)};return i.a.createElement(n.Fragment,null,i.a.createElement("div",{style:{position:"relative"},ref:r},i.a.createElement(s.X,{autoComplete:"off",id:"boardEditDate",onChange:()=>{},onFocus:v,onKeyDown:({event:e})=>{"Backspace"===e.key&&E()},placeholder:o.a._("When do you plan to finish this project?","BoardForm.BoardFormDateField.placeholder","placeholder for input field to enter board end and start dates"),size:"lg",value:y}),i.a.createElement(s.e,{dangerouslySetInlineStyle:{__style:u.length?{}:{pointerEvents:"none"}},position:"absolute",top:!0,right:!g.isRTL,left:g.isRTL,padding:u.length?2:4},u.length?i.a.createElement(s.u,{icon:"clear",iconColor:"darkGray",accessibilityLabel:o.a._("Clear date","BoardForm.BoardFormDateField.clearIcon","accessibility label on clear icon button"),onClick:()=>{E()},size:"sm"}):i.a.createElement(s.t,{color:"darkGray",icon:"calendar",accessibilityLabel:o.a._("Select date","BoardForm.BoardFormDateField.calendarIcon","accessibility label on calendar icon")}))),i.a.createElement(s.e,{padding:2},i.a.createElement(s.V,{color:"gray",size:"sm"},o.a._("Add a date to keep your recommendations relevant and get reminders about planning","BoardForm.BoardFormDateField.description","Description to explain purpose of adding a date to a board"))),l&&i.a.createElement(s.x,null,i.a.createElement(s.e,{position:"absolute",left:g.isRTL,top:!0,zIndex:m.a},i.a.createElement(s.q,{anchor:r.current,idealDirection:"down",onDismiss:v,size:356,positionRelativeToAnchor:!1},i.a.createElement(s.e,{padding:6,width:356},i.a.createElement(h,{onSelectedDate:e=>{p(e),t(e)},selectedDates:u}))))))}},VwDf:function(e,t,a){a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=e=>e.toISOString(),i=({currentEventStartDate:e,currentEventEndDate:t,initialEventStartDate:a,initialEventEndDate:i})=>{let o,r;return e&&t?(o=n(e),r=n(t)):t&&(r=n(t)),i&&!t&&(r=""),a&&!e&&(o=""),i&&n(new Date(i))===t&&(r=null),a&&n(new Date(a))===t&&(o=null),{eventEndDate:r,eventStartDate:o}}},Yo6N:function(e,t,a){a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a("q1tI"),i=a.n(n),o=a("qD10"),r=a("n6mq");function s({action:e,alignCenter:t}){const{title:a,description:n,button:s}=e,l=a&&a.text,c=n&&n.text,d=s&&s.text||"",u=s&&s.link||"",h=s&&s.link?s.link.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""):"";return s&&d&&u.startsWith("http")?i.a.createElement(r.e,null,i.a.createElement(r.e,{marginBottom:1},i.a.createElement(r.V,{align:t?"center":"left",weight:"bold"},""!==d?d:"Visit")),i.a.createElement(r.e,{marginBottom:1},i.a.createElement(o.a,{className:"underlineLink",to:u},i.a.createElement("span",{style:{textDecoration:"underline"}},i.a.createElement(r.V,{align:t?"center":"left",truncate:!0},h))))):i.a.createElement(r.e,null,!!l&&i.a.createElement(r.e,{marginBottom:1},i.a.createElement(r.V,{align:t?"center":"left",weight:"bold"},l)),!!c&&i.a.createElement(r.e,{marginBottom:1},i.a.createElement(r.V,{align:t?"center":"left"},c)))}const l={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},c={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"};function d({inModal:e,notice:t}){const{title:a,description:n,actions:o=[]}=t,d=n&&n.text||"",u=n&&n.text_tags||[],h=1===o.length,p=m(d,u);return i.a.createElement(r.e,{rounding:2,padding:6,dangerouslySetInlineStyle:{__style:e?c:l}},!!a&&!e&&i.a.createElement(r.e,{marginBottom:2,display:"flex"},i.a.createElement(r.s,{size:"md"},a)),!!d&&i.a.createElement(r.e,{marginBottom:4},i.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},i.a.createElement(r.V,{overflow:"normal",align:e?"center":"left"},p))),!!o.length&&i.a.createElement(r.e,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:e?"column":"row"},o.map(t=>i.a.createElement(r.e,{column:e||h?12:6,paddingY:1,paddingX:2,key:JSON.stringify(t)},i.a.createElement(s,{action:t,alignCenter:e||h})))))}var u=a("EC51");function h({notice:e}){const{actions:t=[],description:a,footer:n}=e,o=m(a&&a.text||"",a&&a.text_tags||[]),s={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return i.a.createElement(r.e,{width:"100%",display:"flex",direction:"column",alignItems:"center",marginBottom:3},i.a.createElement(r.e,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",width:656,rounding:8},i.a.createElement(r.e,{height:"100%",width:"100%",padding:10},i.a.createElement("span",{style:s},o),i.a.createElement(r.e,{marginTop:6},t.map(e=>{var t;const a=null===(t=e.button)||void 0===t?void 0:t.link;var n,o,l;return a&&a.startsWith("tel")?i.a.createElement(r.e,null,i.a.createElement("span",{style:{fontWeight:"600",...s}},null===(n=e.title)||void 0===n?void 0:n.text),i.a.createElement("span",{style:s},null===(o=e.description)||void 0===o?void 0:o.text)):i.a.createElement(u.a,{href:a||""},i.a.createElement(r.e,{display:"inlineBlock"},i.a.createElement(r.e,{alignItems:"center",color:"navy",display:"flex",justifyContent:"center",height:44,rounding:"pill",width:117},i.a.createElement(r.V,{color:"white",weight:"bold"},(null===(l=e.button)||void 0===l?void 0:l.text)||""))))})))),!!n&&i.a.createElement(r.e,{paddingY:2,width:540},i.a.createElement(u.a,{inline:!0,target:"blank",href:n.link,key:n.link},i.a.createElement(r.V,{align:"center",color:"gray",size:"sm"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.text}})))))}function m(e,t){const a=[];let n=0;for(let o=0;o<t.length;o+=1){const s=t[o];if(5===s.tag_type&&s.link){const t=e.substring(s.offset,s.offset+s.length),o=i.a.createElement(r.V,{inline:!0,weight:"bold"},i.a.createElement(u.a,{inline:!0,target:"blank",href:s.link,key:t},t));a.push(i.a.createElement("span",null,e.substring(n,s.offset))),a.push(o),n=s.offset+s.length}}return n>0&&a.push(i.a.createElement("span",null,e.substring(n))),0===a.length?[i.a.createElement("span",null,e)]:a}function p({inModal:e,notices:t}){return i.a.createElement(n.Fragment,null,t.map(t=>2===t.style?i.a.createElement(h,{notice:t}):i.a.createElement(d,{notice:t,inModal:e})))}},ZE2w:function(e,t,a){a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));var n=a("4dcN"),i=a("eOdZ");const o="collaborator_approve_invite";function r(e,t){return i.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function s(e,t){return i.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function l(e,t){return a=>i.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(()=>{n.a.trackEvent(o,"success")}).catch(()=>n.a.trackEvent(o,"error"))}function c(e,t,a){return t=>{const{invited_user:n,status:o,board:{id:r}}=e;return i.a.create("accepted"===o?"BoardCollaboratorResource":"BoardInviteResource",{ban:a,board_id:r,field_set_key:"boardEdit",invited_user_id:n.id}).callDelete({showError:!1})}}},"b/K5":function(e,t,a){a.d(t,"a",(function(){return f}));var n=a("q1tI"),i=a.n(n),o=a("n6mq");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],l=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),c=e=>e*(Math.PI/180);class d extends n.PureComponent{constructor(...e){super(...e),r(this,"animationTimer",null),r(this,"canvasRemovalTimer",null),r(this,"containerRef",i.a.createRef()),r(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),a=2.5*e,n=document.createElement("canvas");return n.style.position="absolute",n.style.left=0-(a-t)/2+"px",n.style.top=0-(a-e)/2+"px",n.style.pointerEvents="none",n.style.width=a+"px",n.style.height=a+"px",n.style.overflow="visible",n.width=a,n.height=a,n}),r(this,"explode",()=>{const e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;const a=e.getContext("2d");t.prepend(e);const n=Array.from(Array(120)).map((t,a)=>({x:e.width/2,y:e.height/2,radius:Math.round(l(10,30)),color:s[Math.floor(Math.random()*s.length)],degree:Number(l(0,360).toFixed(1)),speed:Math.round(l(0,25)),friction:.9,opacity:Number(l(0,.5).toFixed(1)),yVel:0,gravity:.04})),i=(e,t,a,n)=>{window.requestAnimationFrame(()=>i(e,t,a,n)),t.clearRect(0,0,a,n),e.forEach((e,a)=>{e.x+=e.speed*Math.cos(c(e.degree)),e.y+=e.speed*Math.sin(c(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};i(n,a,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},this.props.delay+800)})}componentDidUpdate(e){const{delay:t,startAnimation:a}=this.props,{startAnimation:n}=e;a&&n!==a&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return i.a.createElement(o.e,{ref:this.containerRef,position:"relative"},this.props.children)}}r(d,"defaultProps",{delay:0});var u=d,h=a("Ye/N"),m=a("vvax");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=e=>({opacity:e?1:0,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}),b=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"});class f extends n.PureComponent{constructor(...e){super(...e),p(this,"state",{isInitialized:!1}),p(this,"containerRef",Object(n.createRef)()),p(this,"pinDestinationRef",Object(n.createRef)())}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(e,t){const{isInitialized:a}=this.state,{onDismiss:n}=this.props;a&&n&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(n,2600))}render(){const{firstRepin:e,pin:t,pinImageRef:a,selectedBoardName:r}=this.props,{description:s="",images:l}=t,{height:c=0,width:d=0,url:p=""}=l["236x"]||{},{isInitialized:f}=this.state,{mask:y,imageContainer:E}=((e,t,a,n)=>{let i=null,o=null,r={},s={};const l=a.current.getBoundingClientRect();if(n&&n.current){const e=t.current.getBoundingClientRect();s=n.current.getBoundingClientRect(),r={left:l.left-e.left,top:l.top-e.top};const a={x:s.x-l.x,y:s.y-l.y},c={x:(s.width-l.width)/2,y:(s.height-l.height)/2};i=`translate(${a.x}px, ${a.y}px)`,o=`translate(${c.x}px, ${c.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?s.width:l.width,height:e?s.height:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?i:"none",transform:e?i:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:l.width,height:l.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o:"none",transform:e?o:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(f,this.containerRef,a,this.pinDestinationRef);return i.a.createElement(n.Fragment,null,i.a.createElement(o.e,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,ref:this.containerRef},i.a.createElement(o.e,{maxHeight:335,overflow:"hidden",dangerouslySetInlineStyle:{__style:y}},i.a.createElement(o.e,{dangerouslySetInlineStyle:{__style:E}},i.a.createElement(o.v,{alt:s,src:p||"",naturalHeight:c||1,naturalWidth:d||1}))),i.a.createElement(o.e,{color:"white",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:(v=f,{pointerEvents:"none",opacity:v?1:0,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1})}},i.a.createElement(o.e,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",dangerouslySetInlineStyle:{__style:g(f)}},i.a.createElement(u,{delay:1250,startAnimation:f},i.a.createElement(o.A,{rounding:2,width:270,height:180},i.a.createElement(o.e,{display:"flex",height:"100%",width:"100%"},i.a.createElement(o.e,{ref:this.pinDestinationRef,color:"transparent",marginEnd:1,flex:"grow",height:"100%"}),i.a.createElement(o.e,{display:"flex",width:80,direction:"column"},i.a.createElement(o.e,{color:"lightGray",flex:"grow",marginBottom:1}),i.a.createElement(o.e,{color:"lightGray",flex:"grow"}))))),i.a.createElement(o.e,{paddingX:2,dangerouslySetInlineStyle:{__style:b(f)}},i.a.createElement(o.s,{align:"center"},e?Object(m.b)(h.a._("You saved your first Pin to {{ selectedBoardName }}!","First board create confirmation message","First board create confirmation message"),{selectedBoardName:null!=r?r:""}):Object(m.b)(h.a._("You saved this Pin to {{ selectedBoardName }}!","Board create confirmation message","Board create confirmation message"),{selectedBoardName:null!=r?r:""})))))));var v}}p(f,"defaultProps",{firstRepin:!1})},"g/XF":function(e,t,a){a.d(t,"a",(function(){return l}));var n=a("q1tI"),i=a.n(n),o=a("JW66"),r=a("zwad"),s=a("n6mq");function l({url:e,description:t,color:a}){return a=a||o.a.DEFAULT_IMAGELESS_PIN_COLOR,i.a.createElement(s.e,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:a}}},i.a.createElement(s.e,{maxHeight:200,padding:4,overflow:"hidden"},e&&i.a.createElement(s.e,{marginBottom:2},i.a.createElement(s.V,{color:"white",size:"sm"},r.a.parse(e).hostname||e)),i.a.createElement(s.e,{maxHeight:144},i.a.createElement(s.V,{color:"white",overflow:"normal",weight:"bold"},t))))}},lm6u:function(e,t,a){a.d(t,"a",(function(){return I}));var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("1inl"),s=a("3z7j"),l=a("ajUs"),c=a("Ye/N");var d=a("TN0d"),u=a("eOdZ"),h=a("G35+"),m=a("CvCA"),p=a("Wrea"),g=a("ANjH"),b=a("Vzit"),f=a("xjIv"),y=a("WnNx"),E=a("n6mq"),v=a("U4JR"),S=a("NjDU"),w=a("6G9P"),_=a("B6Tf"),C=a("seP0"),x=a("nGHF"),T=a("oN2T"),O=a("EC67");function B(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const j=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi;class k extends i.a.Component{constructor(...e){super(...e),B(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),B(this,"unmounted",!1),B(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),B(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),B(this,"close",()=>{const{onClose:e,boardPickerStopwatch:t}=this.props;e&&e(),t&&t.abort("boardPickerClose"),Object(v.b)(2502,{component:5,element:610})}),B(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),B(this,"getPinResource",(e,t,a)=>{var n;const{color:i,location:o,pin:r,method:s,guid:c,additionalCreateFields:d,advertiser_id:h,previousHistory:m}=this.props;let p;r.id&&(p=Object(l.a)(r,o,m)||r.tracking_params+"~0");const g=r.id?"RepinResource":"PinResource",b=!r.id&&r.image_url?Object(w.b)(r.image_url,r.link):(null===(n=r.images.orig)||void 0===n?void 0:n.url)||"",f={...d,board_id:t||"",color:i||"",clientTrackingParams:p,description:this.state.pinDescription,guid:c||"",link:r.link,image_base64:r.image_base64,image_url:b,is_buyable_pin:!1,is_removable:r.promoted_is_removable,media_upload_id:r.media_upload_id,method:s||"",pin_id:r.id||"",section:a,title:r.title||"",...h?{advertiser_id:h}:{}};if(!e){const{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return u.a.create(g,f)}),B(this,"triggerPubSubs",e=>{d.a.instance.publish("currentUser","pinCreated",e),d.a.instance.publish(e.board.id,"pinCreated",{pin:e})}),B(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((a,n)=>{e.then(e=>t?n({isCanceled:!0}):a(e)),e.catch(e=>n(t?{isCanceled:!0}:e))}),cancel(){t=!0}}}),B(this,"handleLogToastClick",()=>{Object(v.b)(101,{component:20,view:52})}),B(this,"showSuggestedBoardToast",(e,t,a,n)=>{const{toastManagerContext:o,shouldShowToast:r}=this.props;if(r&&e){const{name:t,url:a,image_thumbnail_url:n}=e;o.showOneToast(({onHide:e})=>i.a.createElement(m.a,{duration:_.a,onHide:e,text:i.a.createElement(i.a.Fragment,null,i.a.createElement(E.V,{color:"white"},c.a._("You might also like","Post repin suggested board","Post repin suggested board")),i.a.createElement(E.V,{color:"white",weight:"bold"},t)),href:a,imageUrl:n,onClick:this.handleLogToastClick}))}}),B(this,"showBoardSavedToast",(e,t)=>{const{toastManagerContext:a}=this.props;a.showToast(({onHide:a})=>i.a.createElement(m.a,{duration:_.a,onHide:a,text:Object(w.a)(e.name,t),href:t?`${e.url}${t.slug}`:e.url,imageUrl:e.image_cover_url,onClick:this.handleLogToastClick}))}),B(this,"dismissModal",e=>{const{resolve:t,newPin:a}=this.state;t&&t(a)}),B(this,"fetchBoardRecommendation",e=>u.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(e=>Promise.resolve(e.resource_response.error?null:e.resource_response.data[0]))),B(this,"handleBoardSaveSuccess",(e,t,a,n)=>{const{action:i,dispatch:o,hideSuccessAnimation:r,homeTakeoverExperience:l,pin:d,setCompletionPromise:u,shouldShowToast:h,viewerUserId:m}=this.props;o(Object(b.d)());const g=e.resource_response.data,E=this.makeCancelablePromise(new Promise((e,s)=>{this.triggerPubSubs(g);const d=this.state.pinDescription.match(j)||[];d.length>0&&Object(v.b)(2,{element:10273,hashtags:JSON.stringify(d),objectId:this.props.pin.id});const u=r?()=>{}:()=>{h&&this.showBoardSavedToast(t,a),this.safeSetState({displaySuccessAnimation:!0,modalTitle:c.a._("Board created","Modal title after creating a new board","Modal title after creating a new board"),newPin:g,resolve:e})};"repin"===i?(this.fetchBoardRecommendation(g).then(e=>{this.showSuggestedBoardToast(e,g,a,n)}),n?u():e(g)):("create"===i&&l&&500840===l.experience_id&&(o({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),Object(v.b)(7510,{component:13233})),n?u():e(g))}));if(n||o(Object(y.b)(d.id)),u(E),o(Object(T.d)(t)),o(Object(p.d)({boardId:t.id,sectionId:a&&a.id,increment:1})),m&&(o(Object(S.b)({userId:m,increment:1})),o(Object(b.d)())),a||!t.image_cover_url){const{image_url:e,images:a}=d;t.image_cover_url=e||a&&a["236x"]&&a["236x"].url||"",o(Object(T.e)({},t))}a&&o(Object(s.a)(a.id)),o(Object(f.a)(d.id,t.id,t.name,t.url,g.id))}),B(this,"handleSaveToBoard",(e,t,a)=>{const{boardPickerStopwatch:n,onToggleModal:i,shouldShowToast:o}=this.props;n&&n.abort("boardPickerSubmit"),o&&!a&&(this.close(),this.showBoardSavedToast(e,t));const s="secret"===(e.privacy||""),l={board:t?t.id:e.id,state:_.c.LOADING};this.safeSetState({boardSavedTo:l},()=>{this.getPinResource(s,e.id,(t||{}).id).callCreate({showError:!1}).then(n=>{this.safeSetState({boardSavedTo:Object.assign(l,{state:_.c.SUCCESS})},()=>this.handleBoardSaveSuccess(n,e,t,a)),i&&!a&&i(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),r.a.showError(e.message_detail||e.message);const t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),i&&i(!1)})})}),B(this,"handleSocialConnectSet",(e,t)=>{const a=Object.assign({},this.state.sharing);e===h.a.FACEBOOK?a.facebook=t:e===h.a.TWITTER&&(a.twitter=t),this.safeSetState({sharing:a})}),B(this,"handleNewBoardAnimationCompletion",()=>{const{dispatch:e,pin:t}=this.props;e(Object(y.b)(t.id))})}getModalTitle(e,t){return e?t?c.a._("Create section","modal title for create section pane","modal title for create section pane"):c.a._("Create board","Repin title for making a new board","Repin title for making a new board"):t?c.a._("Choose section","modal title for choose section","modal title for choose section"):c.a._("Choose board","Repin title for choosing a board","Repin title for choosing a board")}componentDidUpdate(e){const{boardWithSection:t,showCreate:a,pin:n,description:i}=this.props,o={};n===e.pin&&i===e.description||(o.pinDescription=n.description||i||""),a===e.showCreate&&t===e.boardWithSection||(o.modalTitle=this.getModalTitle(a,t)),Object.keys(o).length>0&&this.safeSetState(o)}componentWillUnmount(){this.unmounted=!0}render(){const{close:e,dismissModal:t,handleNewBoardAnimationCompletion:a,handleSaveToBoard:n,handleSocialConnectSet:i,setModalTitle:o,updateDescription:r}=this,{boardSavedTo:s,displaySuccessAnimation:l,modalTitle:c,newPin:d}=this.state,{color:u,pin:h}=this.props;return this.props.children({boardSavedTo:s,color:u,dismissModal:t,displaySuccessAnimation:l,handleAbort:e,handleNewBoardAnimationCompletion:a,handleSaveToBoard:n,handleSocialConnectSet:i,modalTitle:c,newPin:d,pin:h,setModalTitle:o,updateDescription:r})}}const I=Object(g.compose)(Object(o.connect)(e=>{const{advertiser:t,viewer:a,history:n}=e,i=a.isAuth&&t&&t.owner_user_id!==a.id?t.id:null,o=e.experiences.eligibleExperiences[11],r=e.experiences.eligibleExperiences[33];return{homeTakeoverExperience:o,previousHistory:n.previous,repinTakeoverExperience:r,...i?{advertiser_id:i}:{},...a.isAuth?{viewerUserId:a.id}:{}}}),x.c,O.k)((function(e){const t=Object(C.c)();return i.a.createElement(k,Object.assign({},e,{boardPickerStopwatch:t}))}))},ou9u:function(e,t,a){function n(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}a.d(t,"a",(function(){return n}))},"v+PR":function(e,t,a){a.d(t,"a",(function(){return b}));var n=a("q1tI"),i=a.n(n),o=a("Ye/N"),r=a("w70y"),s=a("vvax"),l=a("n6mq");function c({pin:e}){const{data:t}=Object(r.a)({name:"PinSaveStatusResource",options:{id:e.id},allowStale:!1});return t&&t.pinned_to_board?i.a.createElement(l.e,null,i.a.createElement(l.e,{color:"red","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185},i.a.createElement(l.V,{align:"center",color:"white",size:"md",weight:"bold"},Object(s.b)(o.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),i.a.createElement(l.e,{display:"flex",justifyContent:"center",marginTop:-3},i.a.createElement(l.t,{accessibilityLabel:"",color:"red",icon:"heart",size:26}))):null}var d=a("P6kd"),u=a("g/XF"),h=a("U4JR");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,g=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/;class b extends n.Component{constructor(...e){super(...e),m(this,"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:this.props.pin&&this.props.pin.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),m(this,"onDescriptionChange",(e,t)=>{const a=new RegExp(p,"g");let n="";if(t<e.length){let i=a.exec(e),o=a.lastIndex<t;for(;i&&o;)i=a.exec(e),o=a.lastIndex<t;const r=!!i&&p.test(e.slice(i.index,t));o=!!i&&i.index<t,i&&r&&o&&(n=i[0])}else{const t=g.exec(e);n=t?t[0]:""}this.updateDescription(e);const i=p.test(n),o=this.state.isHashtagFlyoutOpen?this.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");this.setState({cursorIndex:t,flyoutCursorIndex:o,description:e,hashtagQuery:n,isHashtagFlyoutOpen:i,flyoutOpened:this.state.flyoutOpened||i})}),m(this,"onCursorChange",e=>{const{isHashtagFlyoutOpen:t,flyoutCursorIndex:a}=this.state;t&&e<a&&this.setState({isHashtagFlyoutOpen:!1})}),m(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),m(this,"handleDescriptionBlur",e=>{const t=e.target.value.trim(),{isHashtagFlyoutOpen:a}=this.state;this.updateDescription(t),this.setState({description:t,editing:a})}),m(this,"handleDescriptionEdit",()=>{this.setState({editing:!0})}),m(this,"handleHashtagAddition",e=>{const{pin:t}=this.props;Object(h.b)(101,{component:208,element:10249,hashtags:e,objectId:t.id});const a=this.state.flyoutCursorIndex,n=Number(a+this.state.hashtagQuery.length),i=this.state.description.slice(0,a)+e+" "+this.state.description.slice(n);this.updateDescription(i),this.setState({description:i,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),m(this,"handleRefTextArea",e=>{this._textArea=e})}render(){const{color:e,isFirstPin:t,pin:a,pinImageRef:n}=this.props,{description:o,editing:r,flyoutOpened:s,hashtagQuery:h,isHashtagFlyoutOpen:m}=this.state,{images:p,link:g}=a,b=p&&p["236x"],f=b&&b.url||a.image_base64;return i.a.createElement(l.e,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:t?"50%":"",dangerouslySetInlineStyle:{__style:s&&r?{transform:"translateY(-75px)"}:{}}},i.a.createElement(l.e,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&i.a.createElement(c,{pin:a}),i.a.createElement(l.e,{paddingY:t?9:0,width:240},i.a.createElement(l.e,{ref:n,maxHeight:s&&r?220:335,rounding:4,overflow:"hidden"},f?i.a.createElement(l.v,{alt:o,src:f,naturalHeight:b.height||1,naturalWidth:b.width||1}):!!g&&i.a.createElement(u.a,{color:e||"",description:o,url:g})))),this.anchor&&m?i.a.createElement(d.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:r,query:h}):null)}}},"w/op":function(e,t,a){},xjIv:function(e,t,a){function n(e,t,a,n,i){return{type:"PIN_SAVE",payload:{pinId:e,boardId:t,title:a,url:n,localPinId:i}}}function i(e){return{type:"PIN_UNSAVE",payload:{pinId:e}}}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))},yKES:function(e,t,a){a.d(t,"a",(function(){return l}));var n=a("q1tI"),i=a.n(n),o=a("Ye/N"),r=a("US8k"),s=a("n6mq");function l({duration:e}){return i.a.createElement(s.e,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill"},i.a.createElement(s.t,{accessibilityLabel:o.a._("Video camera icon","Video camera indicator icon for a Pin","Video camera indicator icon for a Pin"),color:"white",icon:"video-camera"}),i.a.createElement(s.e,{marginStart:1},i.a.createElement(s.V,{color:"white",size:"sm",truncate:!0},Object(r.a)(e))))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/206-ec8448d24cbae8d6d862.mjs.map